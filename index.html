<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FF Hahaa</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/nipplejs/0.9.0/nipplejs.min.js"></script>
    
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: Arial; }
        #lobby { position: fixed; inset: 0; background: linear-gradient(to bottom, #1a2a6c, #b21f1f); display: flex; justify-content: center; align-items: center; z-index: 100; color: white; text-align: center; }
        #start-btn { padding: 15px 40px; font-size: 20px; background: #ff4500; color: #fff; border: none; border-radius: 30px; font-weight: bold; cursor: pointer; }
        #ui { display: none; }
        #joy { position: absolute; bottom: 40px; left: 40px; width: 120px; height: 120px; z-index: 10; }
    </style>
</head>
<body>
    <div id="lobby">
        <div><h1>FREE FIRE HAHAA</h1><button id="start-btn">BẮT ĐẦU</button></div>
    </div>
    <div id="ui"><div id="joy"></div></div>

    <script>
        // Phải đợi web load xong mới chạy lệnh
        window.onload = function() {
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x87ceeb);
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            const ground = new THREE.Mesh(new THREE.PlaneGeometry(100, 100), new THREE.MeshBasicMaterial({color: 0x228b22}));
            ground.rotation.x = -Math.PI/2;
            scene.add(ground);

            const player = new THREE.Mesh(new THREE.BoxGeometry(1, 2, 1), new THREE.MeshBasicMaterial({color: 0x00ff00}));
            player.position.y = 1;
            scene.add(player);
            camera.position.set(0, 5, 10);
            camera.lookAt(player.position);

            // NÚT BẤM CHÍNH LÀ ĐÂY
            document.getElementById('start-btn').onclick = function() {
                document.getElementById('lobby').style.display = 'none';
                document.getElementById('ui').style.display = 'block';
                
                // Khởi tạo Joystick sau khi bấm nút
                nipplejs.create({zone: document.getElementById('joy'), mode: 'static', position: {left: '60px', bottom: '60px'}});
            };

            function animate() {
                requestAnimationFrame(animate);
                renderer.render(scene, camera);
            }
            animate();
        };
    </script>
</body>
</html>
